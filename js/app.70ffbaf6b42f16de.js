(function(){"use strict";var e={2003:function(e,t,n){var o=n(5130),l=n(6768);function a(e,t){const n=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.Wv)(n)}var r=n(1241);const s={},i=(0,r.A)(s,[["render",a]]);var c=i,u=n(4458);(0,u.k)("/WebRTC-Camera/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var d=n(1387),v=n(4232),b=n(144),f=n(782),m=n(8420);const p=e=>((0,l.Qi)("data-v-013c9048"),e=e(),(0,l.jt)(),e),k={id:"screen"},g={class:"navbar fixed-top d-block",style:{"z-index":"999","background-color":"rgba(0, 0, 0, 0.5)"}},w={class:"row"},y={class:"col-sm-8"},h={class:"d-flex"},L={type:"button",class:"btn text-white"},x=p((()=>(0,l.Lk)("i",{class:"bi bi-eye-fill"},null,-1))),C={class:"dropdown"},I={class:"btn text-white dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},R=p((()=>(0,l.Lk)("i",{class:"bi bi-camera-fill"},null,-1))),F={class:"dropdown-menu"},q=["onClick"],E={class:"col-sm-4 text-end"},j={key:0},_=p((()=>(0,l.Lk)("i",{class:"bi bi-fullscreen-exit"},null,-1))),O=[_],z={key:1},P=p((()=>(0,l.Lk)("i",{class:"bi bi-fullscreen"},null,-1))),S=[P],W=p((()=>(0,l.Lk)("i",{class:"bi bi-arrow-left-right"},null,-1))),K=p((()=>(0,l.Lk)("button",{type:"button",class:"btn text-white","data-bs-toggle":"modal","data-bs-target":"#qrcodeModal"},[(0,l.Lk)("i",{class:"bi bi-qr-code"}),(0,l.eW)(" QRCode ")],-1))),M={class:"fixed-top d-flex w-100 h-100 align-items-center justify-content-center bg-black",style:{"z-index":"1"}},X={class:"modal fade",id:"qrcodeModal",tabindex:"-1","aria-labelledby":"qrcodeModalLabel","aria-hidden":"true"},A={class:"modal-dialog modal-dialog-centered"},T={class:"modal-content"},D={class:"modal-body"},V={class:"row"},U={class:"col"},N=p((()=>(0,l.Lk)("div",{class:"col-2 ms-auto text-end"},[(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Q={key:0},G=["src"],B=p((()=>(0,l.Lk)("div",{class:"modal-footer justify-content-center border-0"},[(0,l.Lk)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal","aria-label":"Close"},"Close")],-1)));var H={__name:"HomeView",setup(e){const t=(0,f.Pj)(),n=(0,b.KR)(null);(0,b.KR)({});const o=(0,b.KR)([]),a=(0,b.KR)(null),r=(0,b.KR)(null),s=(0,b.KR)(!1),i=(0,b.KR)({}),c=(0,b.KR)(!1),u=(0,l.EW)((()=>t.getters.getPeerId)),d=async e=>{let t={video:{deviceId:e,width:{exact:1920},height:{exact:1080}},audio:!1};try{const e=navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,n=await e(t);return n}catch(n){console.error(n)}},p=()=>{const e=document.querySelector("#screen");document.fullscreenElement?(document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.exitFullscreen(),c.value=!1):(e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.requestFullscreen(),c.value=!0)},_=async e=>{localStorage.setItem("cameraId",e.deviceId),window.location.reload()},P=async()=>{const e=await navigator.mediaDevices.enumerateDevices(),t=e.filter((e=>"videoinput"==e.kind));o.value=t};return(0,l.sV)((async()=>{let e=localStorage.getItem("cameraId")??"default";await P();const t=await d(e);a.value=t.getVideoTracks()[0].label,n.value.srcObject=t,n.value.play(),r.value=await m.toDataURL(u.value);const o=new Peer(u.value);o.on("open",(e=>{})),o.on("connection",(e=>{console.log(e),e.on("close",(()=>{delete i.value[e.peer]}))})),o.on("call",(e=>{e.answer(t),i.value[e.peer]=e,e.on("close",(e=>{console.log("close")}))}))})),(e,t)=>((0,l.uX)(),(0,l.CE)("div",k,[(0,l.Lk)("nav",g,[(0,l.Lk)("div",w,[(0,l.Lk)("div",y,[(0,l.Lk)("div",h,[(0,l.Lk)("button",L,[x,(0,l.eW)("   "+(0,v.v_)(Object.values(i.value).length),1)]),(0,l.Lk)("div",C,[(0,l.Lk)("button",I,[R,(0,l.eW)("    "+(0,v.v_)(a.value),1)]),(0,l.Lk)("ul",F,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.value,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e.id},[(0,l.Lk)("a",{class:"dropdown-item",href:"#",onClick:t=>_(e)},(0,v.v_)(e.label),9,q)])))),128))])])])]),(0,l.Lk)("div",E,[(0,l.Lk)("button",{type:"button",class:"btn text-white",onClick:t[0]||(t[0]=e=>p())},[c.value?((0,l.uX)(),(0,l.CE)("span",j,O)):((0,l.uX)(),(0,l.CE)("span",z,S))]),(0,l.Lk)("button",{type:"button",class:"btn text-white",onClick:t[1]||(t[1]=()=>{s.value=!s.value})},[W,(0,l.eW)(" Mirror ")]),K])])]),(0,l.Lk)("div",M,[(0,l.Lk)("video",{class:(0,v.C4)(["video",[s.value?"mirror":""]]),ref_key:"videoEl",ref:n},null,2)]),(0,l.Lk)("div",X,[(0,l.Lk)("div",A,[(0,l.Lk)("div",T,[(0,l.Lk)("div",D,[(0,l.Lk)("div",V,[(0,l.Lk)("div",U," ID: "+(0,v.v_)(u.value),1),N]),r.value?((0,l.uX)(),(0,l.CE)("div",Q,[(0,l.Lk)("img",{class:"w-100",src:r.value},null,8,G)])):(0,l.Q3)("",!0)]),B])])])]))}};const $=(0,r.A)(H,[["__scopeId","data-v-013c9048"]]);var J=$,Y=n(3574);const Z={class:"fixed-top w-100 h-100 d-flex align-items-center justify-content-center"},ee=(0,l.Lk)("div",{class:"text-center"},[(0,l.Lk)("div",{class:"spinner-border text-primary mb-3",role:"status"},[(0,l.Lk)("span",{class:"visually-hidden"})]),(0,l.Lk)("div",{class:"h4 text-primary"},"Initializing...")],-1),te=[ee];var ne={__name:"InitializeView",setup(e){const t=(0,f.Pj)(),n=(0,d.rd)(),o=(0,d.lq)();return(0,l.sV)((()=>{let e=localStorage.getItem("myid");null==e&&(e=o.query.uuid,e=null==e?(0,Y.A)():e,localStorage.setItem("myid",e)),t.commit("setPeerId",e),n.replace("/")})),(e,t)=>((0,l.uX)(),(0,l.CE)("div",Z,te))}};const oe=ne;var le=oe,ae=(0,f.y$)({state:{peerId:null},getters:{getPeerId(e){return e.peerId}},mutations:{setPeerId(e,t){e.peerId=t}},actions:{},modules:{}});const re=[{path:"/",name:"home",component:J,beforeEnter:(e,t,n)=>{const o=ae.getters["getPeerId"];if(o)n();else{const t=e.query;n({path:"/initialize",query:t})}}},{path:"/initialize",name:"initialize",component:le}],se=(0,d.aE)({history:(0,d.LA)("/WebRTC-Camera/"),routes:re});var ie=se;(0,o.Ef)(c).use(ae).use(ie).mount("#app")}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,l,a){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],l=e[u][1],a=e[u][2];for(var s=!0,i=0;i<o.length;i++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(s=!1,a<r&&(r=a));if(s){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,l,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,a,r=o[0],s=o[1],i=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(i)var u=i(n)}for(t&&t(o);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},o=self["webpackChunkWebRTC_Camera"]=self["webpackChunkWebRTC_Camera"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(2003)}));o=n.O(o)})();
//# sourceMappingURL=app.70ffbaf6b42f16de.js.map