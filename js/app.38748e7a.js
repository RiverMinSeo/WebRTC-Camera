(function(){"use strict";var e={3345:function(e,t,n){var a=n(5130),o=n(6768);function r(e,t){const n=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(n)}var i=n(1241);const l={},s=(0,i.A)(l,[["render",r]]);var c=s,d=n(4458);(0,d.k)("/WebRTC-Camera/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var u=n(1387),v=n(4232),b=n(144),f=n(782),p=n(8420);const g=e=>((0,o.Qi)("data-v-5baf21c7"),e=e(),(0,o.jt)(),e),m={class:"navbar fixed-top bg-black d-block",style:{"z-index":"999"}},k={class:"row"},h={class:"col-md-8"},w={class:"d-flex"},y={type:"button",class:"btn text-white"},L=g((()=>(0,o.Lk)("i",{class:"bi bi-eye-fill"},null,-1))),x={class:"dropdown"},C={class:"btn text-white dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},I=g((()=>(0,o.Lk)("i",{class:"bi bi-camera-fill"},null,-1))),j={class:"dropdown-menu"},_=["onClick"],O={class:"col-md-4 text-end"},E=g((()=>(0,o.Lk)("i",{class:"bi bi-arrow-left-right"},null,-1))),R=g((()=>(0,o.Lk)("button",{type:"button",class:"btn text-white","data-bs-toggle":"modal","data-bs-target":"#qrcodeModal"},[(0,o.Lk)("i",{class:"bi bi-qr-code"}),(0,o.eW)(" QRCode ")],-1))),P={class:"fixed-bottom d-flex w-100 align-items-center justify-content-center bg-black",style:{height:"calc(100% - 54px)","z-index":"1"}},W={class:"modal fade",id:"qrcodeModal",tabindex:"-1","aria-labelledby":"qrcodeModalLabel","aria-hidden":"true"},z={class:"modal-dialog modal-dialog-centered"},K={class:"modal-content"},M={class:"modal-body"},A={class:"row"},T={class:"col"},X=g((()=>(0,o.Lk)("div",{class:"col-2 ms-auto text-end"},[(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),q={key:0},D=["src"],F=g((()=>(0,o.Lk)("div",{class:"modal-footer justify-content-center border-0"},[(0,o.Lk)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal","aria-label":"Close"},"Close")],-1)));var V={__name:"HomeView",setup(e){const t=(0,f.Pj)(),n=(0,b.KR)(null);(0,b.KR)({});const a=(0,b.KR)([]),r=(0,b.KR)(null),i=(0,b.KR)(null),l=(0,b.KR)(!1),s={},c=(0,o.EW)((()=>t.getters.getPeerId)),d=async e=>{let t={video:{width:{exact:1920},height:{exact:1080}},audio:!1};t={...t,...e};try{const e=navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,n=await e(t);return n}catch(n){console.error(n)}},u=async e=>{const t=await d({video:{deviceId:e.deviceId}});n.value.srcObject=t,n.value.play();for(const n in s)n.answer(t)},g=async()=>{const e=await navigator.mediaDevices.enumerateDevices();a.value=e.filter((e=>"videoinput"==e.kind))};return(0,o.sV)((async()=>{await g();const e=await d();r.value=e.getVideoTracks()[0].label,n.value.srcObject=e,n.value.play(),i.value=await p.toDataURL(c.value);const t=new Peer(c.value);t.on("open",(n=>{t.on("call",(t=>{s[t.peer]=t,t.answer(e)}))}))})),(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("nav",m,[(0,o.Lk)("div",k,[(0,o.Lk)("div",h,[(0,o.Lk)("div",w,[(0,o.Lk)("button",y,[L,(0,o.eW)("   "+(0,v.v_)(Object.values(s).length),1)]),(0,o.Lk)("div",x,[(0,o.Lk)("button",C,[I,(0,o.eW)("    "+(0,v.v_)(r.value),1)]),(0,o.Lk)("ul",j,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.value,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id},[(0,o.Lk)("a",{class:"dropdown-item",href:"#",onClick:t=>u(e)},(0,v.v_)(e.label),9,_)])))),128))])])])]),(0,o.Lk)("div",O,[(0,o.Lk)("button",{type:"button",class:"btn text-white",onClick:t[0]||(t[0]=()=>{l.value=!l.value})},[E,(0,o.eW)(" Mirror ")]),R])])]),(0,o.Lk)("div",P,[(0,o.Lk)("video",{class:(0,v.C4)(["video",[l.value?"mirror":""]]),ref_key:"videoEl",ref:n},null,2)]),(0,o.Lk)("div",W,[(0,o.Lk)("div",z,[(0,o.Lk)("div",K,[(0,o.Lk)("div",M,[(0,o.Lk)("div",A,[(0,o.Lk)("div",T," ID: "+(0,v.v_)(c.value),1),X]),i.value?((0,o.uX)(),(0,o.CE)("div",q,[(0,o.Lk)("img",{class:"w-100",src:i.value},null,8,D)])):(0,o.Q3)("",!0)]),F])])])],64))}};const U=(0,i.A)(V,[["__scopeId","data-v-5baf21c7"]]);var N=U,Q=n(3574);const S={class:"fixed-top w-100 h-100 d-flex align-items-center justify-content-center"},G=(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("div",{class:"spinner-border text-primary mb-3",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"})]),(0,o.Lk)("div",{class:"h4 text-primary"},"Initializing...")],-1),B=[G];var H={__name:"InitializeView",setup(e){const t=(0,f.Pj)(),n=(0,u.rd)();return(0,o.sV)((()=>{let e=localStorage.getItem("myid");null==e&&(e=(0,Q.A)(),localStorage.setItem("myid",e)),t.commit("setPeerId",e),n.replace("/")})),(e,t)=>((0,o.uX)(),(0,o.CE)("div",S,B))}};const $=H;var J=$,Y=(0,f.y$)({state:{peerId:null},getters:{getPeerId(e){return e.peerId}},mutations:{setPeerId(e,t){e.peerId=t}},actions:{},modules:{}});const Z=[{path:"/",name:"home",component:N,beforeEnter:(e,t,n)=>{const a=Y.getters["getPeerId"];a?n():n({path:"/initialize"})}},{path:"/initialize",name:"initialize",component:J}],ee=(0,u.aE)({history:(0,u.LA)("/WebRTC-Camera/"),routes:Z});var te=ee;(0,a.Ef)(c).use(Y).use(te).mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,r){if(!a){var i=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],r=e[d][2];for(var l=!0,s=0;s<a.length;s++)(!1&r||i>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,i=a[0],l=a[1],s=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)var d=s(n)}for(t&&t(a);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},a=self["webpackChunkWebRTC_Camera"]=self["webpackChunkWebRTC_Camera"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(3345)}));a=n.O(a)})();
//# sourceMappingURL=app.38748e7a.js.map