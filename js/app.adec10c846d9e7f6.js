(function(){"use strict";var e={8062:function(e,t,n){var l=n(5130),o=n(6768);function a(e,t){const n=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(n)}var i=n(1241);const r={},s=(0,i.A)(r,[["render",a]]);var c=s,u=n(4458);const d=()=>/wv/i.test(window.navigator.userAgent);d()||(0,u.k)("/WebRTC-Camera/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var v=n(1387),b=n(4232),f=n(144),m=n(782),k=n(8420);const p=e=>((0,o.Qi)("data-v-142f2a11"),e=e(),(0,o.jt)(),e),g={id:"screen"},w={key:0},h={class:"navbar fixed-top d-block",style:{"z-index":"999","background-color":"rgba(0, 0, 0, 0.5)"}},y={class:"row"},L={class:"col-6"},x={class:"d-flex"},C={type:"button",class:"btn text-white"},E=p((()=>(0,o.Lk)("i",{class:"bi bi-eye-fill"},null,-1))),R={class:"col-6 text-end"},j={class:"d-flex justify-content-between pe-3"},q={key:0},F=p((()=>(0,o.Lk)("i",{class:"bi bi-fullscreen-exit"},null,-1))),O=[F],I={key:1},P=p((()=>(0,o.Lk)("i",{class:"bi bi-fullscreen"},null,-1))),_=[P],z=p((()=>(0,o.Lk)("i",{class:"bi bi-battery-half"},null,-1))),W=p((()=>(0,o.Lk)("br",null,null,-1))),A=p((()=>(0,o.Lk)("small",null,"절전",-1))),K=[z,W,A],M=p((()=>(0,o.Lk)("button",{type:"button",class:"btn text-white","data-bs-toggle":"modal","data-bs-target":"#qrcodeModal"},[(0,o.Lk)("i",{class:"bi bi-qr-code"}),(0,o.Lk)("br"),(0,o.Lk)("small",null,"QR")],-1))),X={class:"fixed-top d-flex w-100 h-100 align-items-center justify-content-center bg-black",style:{"z-index":"1"}},S={key:0,class:"fixed-bottom w-100 text-center text-white d-flex justify-content-center align-items-center p-3"},T=p((()=>(0,o.Lk)("i",{class:"bi bi-phone-landscape h1"},null,-1))),Q=p((()=>(0,o.Lk)("div",{class:"ps-3"},[(0,o.eW)(" 가로모드로 전환 후"),(0,o.Lk)("br"),(0,o.eW)("새로고침을 해주세요 ")],-1))),U=[T,Q],N={key:1,class:"fixed-top w-100 h-100 bg-black d-flex justify-content-center align-items-center"},V=p((()=>(0,o.Lk)("i",{class:"bi bi-unlock-fill h1"},null,-1))),D=p((()=>(0,o.Lk)("div",{class:"pt-3"},"UNLOCK",-1))),G=[V,D],B={class:"modal fade",id:"qrcodeModal",tabindex:"-1","aria-labelledby":"qrcodeModalLabel","aria-hidden":"true"},H={class:"modal-dialog modal-dialog-centered"},Y={class:"modal-content"},$={class:"modal-body"},J={class:"row"},Z={class:"col"},ee=p((()=>(0,o.Lk)("div",{class:"col-2 ms-auto text-end"},[(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),te={key:0},ne=["src"],le=p((()=>(0,o.Lk)("div",{class:"modal-footer justify-content-center border-0"},[(0,o.Lk)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal","aria-label":"Close"},"Close")],-1)));var oe={__name:"HomeView",setup(e){const t=(0,m.Pj)(),n=(0,f.KR)(null);(0,f.KR)({});const l=(0,f.KR)(null),a=(0,f.KR)(!1),i=(0,f.KR)({}),r=(0,f.KR)(!1),s=(0,f.KR)(null),c=(0,f.KR)(""),u=(0,o.EW)((()=>t.getters.getPeerId)),d=(0,f.KR)(!1),v=(0,o.EW)((()=>/iPhone|iPad|iPod|Android/i.test(window.navigator.userAgent))),p=(0,o.EW)((()=>/wv/i.test(window.navigator.userAgent))),F=(0,o.EW)((()=>c.value.indexOf("landscape")>-1)),P=async()=>{const e=window.screen.width,t=window.screen.height,n=window.devicePixelRatio??1;let l=Math.floor(e*n),o=Math.floor(t*n),a={video:{width:{exact:l},height:{exact:o}},audio:!1};v.value&&(a.video.aspectRatio=e/t,a.video.facingMode={exact:"environment"});try{const e=navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,t=await e(a);return t}catch(i){console.error(i)}},z=e=>{e?(n.value.srcObject=null,d.value=e):(d.value=e,(0,o.dY)((()=>{n.value.srcObject=s.value,n.value.play()})))},W=()=>{const e=document.querySelector("#screen");document.fullscreenElement?(document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.exitFullscreen(),r.value=!1):(e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.requestFullscreen(),r.value=!0)},A=e=>{c.value=e.target.screen.orientation.type};return(0,o.sV)((async()=>{window.addEventListener("orientationchange",A),c.value=window.screen.orientation.type;const e=await P();s.value=e,n.value.srcObject=e,n.value.play(),l.value=await k.toDataURL(u.value);const t=new Peer(u.value);t.on("open",(e=>{})),t.on("connection",(e=>{e.on("close",(()=>{delete i.value[e.peer]}))})),t.on("call",(t=>{t.answer(e),i.value[t.peer]=t,t.on("close",(e=>{console.log("close")}))}))})),(0,o.hi)((()=>{window.removeEventListener("orientationchange",A)})),(e,t)=>((0,o.uX)(),(0,o.CE)("div",g,[d.value?((0,o.uX)(),(0,o.CE)("div",N,[(0,o.Lk)("button",{class:"btn text-white",onClick:t[2]||(t[2]=e=>z(!d.value))},G)])):((0,o.uX)(),(0,o.CE)("div",w,[(0,o.Lk)("nav",h,[(0,o.Lk)("div",y,[(0,o.Lk)("div",L,[(0,o.Lk)("div",x,[(0,o.Lk)("button",C,[E,(0,o.eW)("   "+(0,b.v_)(Object.values(i.value).length),1)])])]),(0,o.Lk)("div",R,[(0,o.Lk)("div",j,[p.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"btn text-white",onClick:t[0]||(t[0]=e=>W())},[r.value?((0,o.uX)(),(0,o.CE)("span",q,O)):((0,o.uX)(),(0,o.CE)("span",I,_))])),(0,o.Lk)("button",{type:"button",class:"btn text-white",onClick:t[1]||(t[1]=e=>z(!d.value))},K),M])])])]),(0,o.Lk)("div",X,[(0,o.Lk)("video",{class:(0,b.C4)(["video",[a.value?"mirror":""]]),ref_key:"videoEl",ref:n},null,2)]),p.value||!v.value||F.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",S,U))])),(0,o.Lk)("div",B,[(0,o.Lk)("div",H,[(0,o.Lk)("div",Y,[(0,o.Lk)("div",$,[(0,o.Lk)("div",J,[(0,o.Lk)("div",Z," ID: "+(0,b.v_)(u.value),1),ee]),l.value?((0,o.uX)(),(0,o.CE)("div",te,[(0,o.Lk)("img",{class:"w-100",src:l.value},null,8,ne)])):(0,o.Q3)("",!0)]),le])])])]))}};const ae=(0,i.A)(oe,[["__scopeId","data-v-142f2a11"]]);var ie=ae,re=n(3574);const se={class:"fixed-top w-100 h-100 d-flex align-items-center justify-content-center"},ce=(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("div",{class:"spinner-border text-primary mb-3",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"})]),(0,o.Lk)("div",{class:"h4 text-primary"},"Initializing...")],-1),ue=[ce];var de={__name:"InitializeView",setup(e){const t=(0,m.Pj)(),n=(0,v.rd)(),l=(0,v.lq)();return(0,o.sV)((()=>{let e=localStorage.getItem("myid");null==e&&(e=l.query.uuid,e=null==e?(0,re.A)():e,localStorage.setItem("myid",e)),t.commit("setPeerId",e),n.replace("/")})),(e,t)=>((0,o.uX)(),(0,o.CE)("div",se,ue))}};const ve=de;var be=ve,fe=(0,m.y$)({state:{peerId:null},getters:{getPeerId(e){return e.peerId}},mutations:{setPeerId(e,t){e.peerId=t}},actions:{},modules:{}});const me=[{path:"/",name:"home",component:ie,beforeEnter:(e,t,n)=>{const l=fe.getters["getPeerId"];if(l)n();else{const t=e.query;n({path:"/initialize",query:t})}}},{path:"/initialize",name:"initialize",component:be}],ke=(0,v.aE)({history:(0,v.LA)("/WebRTC-Camera/"),routes:me});var pe=ke;(0,l.Ef)(c).use(fe).use(pe).mount("#app")}},t={};function n(l){var o=t[l];if(void 0!==o)return o.exports;var a=t[l]={exports:{}};return e[l].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,l,o,a){if(!l){var i=1/0;for(u=0;u<e.length;u++){l=e[u][0],o=e[u][1],a=e[u][2];for(var r=!0,s=0;s<l.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](l[s])}))?l.splice(s--,1):(r=!1,a<i&&(i=a));if(r){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[l,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,a,i=l[0],r=l[1],s=l[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(s)var u=s(n)}for(t&&t(l);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},l=self["webpackChunkWebRTC_Camera"]=self["webpackChunkWebRTC_Camera"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=n.O(void 0,[504],(function(){return n(8062)}));l=n.O(l)})();
//# sourceMappingURL=app.adec10c846d9e7f6.js.map