(function(){"use strict";var e={1597:function(e,t,n){var o=n(5130),l=n(6768);function a(e,t){const n=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.Wv)(n)}var i=n(1241);const r={},s=(0,i.A)(r,[["render",a]]);var c=s,u=n(4458);const d=()=>/wv/i.test(window.navigator.userAgent);d()||(0,u.k)("/WebRTC-Camera/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var v=n(1387),b=n(4232),f=n(144),k=n(782),m=n(8420),p=n(8152),w=n.n(p);const g=e=>((0,l.Qi)("data-v-11d7644a"),e=e(),(0,l.jt)(),e),h={id:"screen"},y={key:0},L={class:"navbar fixed-top d-block",style:{"z-index":"999","background-color":"rgba(0, 0, 0, 0.5)"}},x={class:"row"},C={class:"col-6"},E={class:"d-flex"},R={type:"button",class:"btn text-white"},j=g((()=>(0,l.Lk)("i",{class:"bi bi-eye-fill"},null,-1))),q={class:"col-6 text-end"},F={class:"d-flex justify-content-between pe-3"},O=g((()=>(0,l.Lk)("i",{class:"bi bi-arrow-clockwise"},null,-1))),P=[O],W={key:0},A=g((()=>(0,l.Lk)("i",{class:"bi bi-fullscreen-exit"},null,-1))),I=[A],_={key:1},z=g((()=>(0,l.Lk)("i",{class:"bi bi-fullscreen"},null,-1))),K=[z],M=g((()=>(0,l.Lk)("i",{class:"bi bi-battery-half"},null,-1))),X=g((()=>(0,l.Lk)("br",null,null,-1))),S=g((()=>(0,l.Lk)("small",null,"절전",-1))),T=[M,X,S],Q=g((()=>(0,l.Lk)("button",{type:"button",class:"btn text-white","data-bs-toggle":"modal","data-bs-target":"#qrcodeModal"},[(0,l.Lk)("i",{class:"bi bi-qr-code"}),(0,l.Lk)("br"),(0,l.Lk)("small",null,"QR")],-1))),U={class:"fixed-top d-flex w-100 h-100 align-items-center justify-content-center bg-black",style:{"z-index":"1"}},V={key:0,class:"fixed-bottom w-100 text-center text-white d-flex justify-content-center align-items-center p-3"},N=g((()=>(0,l.Lk)("i",{class:"bi bi-phone-landscape h1"},null,-1))),D=g((()=>(0,l.Lk)("div",{class:"ps-3"},[(0,l.eW)(" 가로모드로 전환 후"),(0,l.Lk)("br"),(0,l.eW)("새로고침을 해주세요 ")],-1))),G=[N,D],B={key:1,class:"fixed-top w-100 h-100 bg-black d-flex justify-content-center align-items-center"},H=g((()=>(0,l.Lk)("div",null,[(0,l.Lk)("i",{class:"bi bi-battery-half text-white"})],-1))),Y=g((()=>(0,l.Lk)("div",{class:"h4"},[(0,l.Lk)("i",{class:"bi bi-unlock-fill"}),(0,l.eW)(" UNLOCK ")],-1))),$=[Y],J={class:"modal fade",id:"qrcodeModal",tabindex:"-1","aria-labelledby":"qrcodeModalLabel","aria-hidden":"true"},Z={class:"modal-dialog modal-dialog-centered"},ee={class:"modal-content"},te={class:"modal-body"},ne={class:"row"},oe={class:"col"},le=g((()=>(0,l.Lk)("div",{class:"col-2 ms-auto text-end"},[(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ae={key:0},ie=["src"],re=g((()=>(0,l.Lk)("div",{class:"modal-footer justify-content-center border-0"},[(0,l.Lk)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal","aria-label":"Close"},"Close")],-1)));var se={__name:"HomeView",setup(e){const t=new(w()),n=(0,k.Pj)(),o=(0,f.KR)(null);(0,f.KR)({});const a=(0,f.KR)(null),i=(0,f.KR)(!1),r=(0,f.KR)({}),s=(0,f.KR)(!1),c=(0,f.KR)(null),u=(0,f.KR)(""),d=(0,l.EW)((()=>n.getters.getPeerId)),v=(0,f.KR)(!1),p=((0,l.EW)((()=>/Android/i.test(window.navigator.userAgent))),(0,l.EW)((()=>/iPhone|iPad|iPod/i.test(window.navigator.userAgent))),(0,l.EW)((()=>/iPhone|iPad|iPod|Android/i.test(window.navigator.userAgent)))),g=(0,l.EW)((()=>/wv/i.test(window.navigator.userAgent))),O=(0,l.EW)((()=>u.value.indexOf("landscape")>-1)),A=()=>location.reload(!0),z=()=>{const e=window.screen.width,t=window.screen.height,n=window.devicePixelRatio??1;let o=Math.floor(e*n),l=Math.floor(t*n),a={video:{width:{exact:o},height:{exact:l}},audio:!1};return p.value&&(a.video.aspectRatio=e/t,a.video.facingMode={exact:"environment"}),a},M=async()=>{const e=z();try{const t=navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,n=await t(e);return n}catch(t){console.error(t)}},X=e=>{e?(o.value.srcObject=null,v.value=e):(v.value=e,(0,l.dY)((()=>{o.value.srcObject=c.value,o.value.play()})))},S=()=>{const e=document.querySelector("#screen");document.fullscreenElement?(document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.exitFullscreen(),s.value=!1):(e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.requestFullscreen(),s.value=!0)},N=e=>{if(u.value=e.target.screen.orientation.type,c.value){const e=c.value.getVideoTracks()[0],t=z();e.applyConstraints(t).then((()=>{})).catch((e=>{console.error(e)}))}};return(0,l.sV)((async()=>{t.enable(),window.addEventListener("orientationchange",N),u.value=window.screen.orientation.type;const e=await M();c.value=e,o.value.srcObject=e,o.value.play(),a.value=await m.toDataURL(d.value);const n=new Peer(d.value);n.on("open",(e=>{})),n.on("connection",(e=>{e.on("close",(()=>{delete r.value[e.peer]}))})),n.on("call",(t=>{t.answer(e),r.value[t.peer]=t,t.on("close",(e=>{console.log("close")}))}))})),(0,l.hi)((()=>{t.disable(),window.removeEventListener("orientationchange",N)})),(e,t)=>((0,l.uX)(),(0,l.CE)("div",h,[v.value?((0,l.uX)(),(0,l.CE)("div",B,[(0,l.Lk)("div",null,[H,(0,l.Lk)("button",{class:"btn text-white",onClick:t[3]||(t[3]=e=>X(!v.value))},$)])])):((0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("nav",L,[(0,l.Lk)("div",x,[(0,l.Lk)("div",C,[(0,l.Lk)("div",E,[(0,l.Lk)("button",R,[j,(0,l.eW)("   "+(0,b.v_)(Object.values(r.value).length),1)])])]),(0,l.Lk)("div",q,[(0,l.Lk)("div",F,[(0,l.Lk)("button",{type:"button",class:"btn text-white",onClick:t[0]||(t[0]=e=>A())},P),g.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("button",{key:0,type:"button",class:"btn text-white",onClick:t[1]||(t[1]=e=>S())},[s.value?((0,l.uX)(),(0,l.CE)("span",W,I)):((0,l.uX)(),(0,l.CE)("span",_,K))])),(0,l.Lk)("button",{type:"button",class:"btn text-white",onClick:t[2]||(t[2]=e=>X(!v.value))},T),Q])])])]),(0,l.Lk)("div",U,[(0,l.Lk)("video",{class:(0,b.C4)(["video",[i.value?"mirror":""]]),ref_key:"videoEl",ref:o},null,2)]),g.value||!p.value||O.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",V,G))])),(0,l.Lk)("div",J,[(0,l.Lk)("div",Z,[(0,l.Lk)("div",ee,[(0,l.Lk)("div",te,[(0,l.Lk)("div",ne,[(0,l.Lk)("div",oe," ID: "+(0,b.v_)(d.value),1),le]),a.value?((0,l.uX)(),(0,l.CE)("div",ae,[(0,l.Lk)("img",{class:"w-100",src:a.value},null,8,ie)])):(0,l.Q3)("",!0)]),re])])])]))}};const ce=(0,i.A)(se,[["__scopeId","data-v-11d7644a"]]);var ue=ce,de=n(3574);const ve={class:"fixed-top w-100 h-100 d-flex align-items-center justify-content-center"},be=(0,l.Lk)("div",{class:"text-center"},[(0,l.Lk)("div",{class:"spinner-border text-primary mb-3",role:"status"},[(0,l.Lk)("span",{class:"visually-hidden"})]),(0,l.Lk)("div",{class:"h4 text-primary"},"Initializing...")],-1),fe=[be];var ke={__name:"InitializeView",setup(e){const t=(0,k.Pj)(),n=(0,v.rd)(),o=(0,v.lq)();return(0,l.sV)((()=>{let e=localStorage.getItem("myid");null==e&&(e=o.query.uuid,e=null==e?(0,de.A)():e,localStorage.setItem("myid",e)),t.commit("setPeerId",e),n.replace("/")})),(e,t)=>((0,l.uX)(),(0,l.CE)("div",ve,fe))}};const me=ke;var pe=me,we=(0,k.y$)({state:{peerId:null},getters:{getPeerId(e){return e.peerId}},mutations:{setPeerId(e,t){e.peerId=t}},actions:{},modules:{}});const ge=[{path:"/",name:"home",component:ue,beforeEnter:(e,t,n)=>{const o=we.getters["getPeerId"];if(o)n();else{const t=e.query;n({path:"/initialize",query:t})}}},{path:"/initialize",name:"initialize",component:pe}],he=(0,v.aE)({history:(0,v.LA)("/WebRTC-Camera/"),routes:ge});var ye=he;(0,o.Ef)(c).use(we).use(ye).mount("#app")}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,l,a){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],l=e[u][1],a=e[u][2];for(var r=!0,s=0;s<o.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(r=!1,a<i&&(i=a));if(r){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,l,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,a,i=o[0],r=o[1],s=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(l in r)n.o(r,l)&&(n.m[l]=r[l]);if(s)var u=s(n)}for(t&&t(o);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},o=self["webpackChunkWebRTC_Camera"]=self["webpackChunkWebRTC_Camera"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(1597)}));o=n.O(o)})();
//# sourceMappingURL=app.42ede8f126c3a5c8.js.map