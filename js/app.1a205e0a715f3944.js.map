{"version":3,"file":"js/app.1a205e0a715f3944.js","mappings":"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","sources":["webpack://WebRTC-Camera/./src/App.vue","webpack://WebRTC-Camera/./src/App.vue?7ccd","webpack://WebRTC-Camera/./src/registerServiceWorker.js","webpack://WebRTC-Camera/./src/views/HomeView.vue","webpack://WebRTC-Camera/./src/views/HomeView.vue?1da1","webpack://WebRTC-Camera/./src/views/InitializeView.vue","webpack://WebRTC-Camera/./src/views/InitializeView.vue?b7cd","webpack://WebRTC-Camera/./src/store/index.js","webpack://WebRTC-Camera/./src/router/index.js","webpack://WebRTC-Camera/./src/main.js","webpack://WebRTC-Camera/webpack/bootstrap","webpack://WebRTC-Camera/webpack/runtime/chunk loaded","webpack://WebRTC-Camera/webpack/runtime/compat get default export","webpack://WebRTC-Camera/webpack/runtime/define property getters","webpack://WebRTC-Camera/webpack/runtime/global","webpack://WebRTC-Camera/webpack/runtime/hasOwnProperty shorthand","webpack://WebRTC-Camera/webpack/runtime/jsonp chunk loading","webpack://WebRTC-Camera/webpack/startup"],"sourcesContent":["<template>  \n  <router-view/>\n</template>\n\n<style lang=\"scss\">\n\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=1e899853\"\nconst script = {}\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nconst isWebView = ()=> /wv/i.test(window.navigator.userAgent)\n\nif (process.env.NODE_ENV === 'production' && !isWebView()) {  \n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","<template>\n  <div id=\"screen\">\n    <div v-if=\"!isSaveMode\">\n      <nav class=\"navbar fixed-top d-block\" style=\"z-index: 999; background-color: rgba(0, 0, 0, 0.5)\">\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"d-flex\">\n              <button type=\"button\" class=\"btn text-white\">\n                <i class=\"bi bi-eye-fill\"></i>&nbsp;&nbsp;&nbsp;{{ Object.values(connectedPeers).length }}\n              </button>            \n            </div>        \n          </div>\n          <div class=\"col-6 text-end\">\n            <div class=\"d-flex justify-content-between pe-3\">\n              <button type=\"button\" class=\"btn text-white\" @click=\"onClickRefresh()\">\n                <i class=\"bi bi-arrow-clockwise\"></i>\n              </button> \n              <button type=\"button\" v-if=\"!isWebView\" class=\"btn text-white\" @click=\"toggleFullScreen()\">\n                <span v-if=\"isFullScreen\">\n                  <i class=\"bi bi-fullscreen-exit\"></i>\n                </span>\n                <span v-else>\n                  <i class=\"bi bi-fullscreen\"></i>\n                </span>\n              </button>\n              <button type=\"button\" class=\"btn text-white\" @click=\"onClickSaveMode(!isSaveMode)\">                \n                <i class=\"bi bi-battery-half\"></i><br><small>절전</small>\n              </button> \n              <button type=\"button\" class=\"btn text-white\" data-bs-toggle=\"modal\" data-bs-target=\"#qrcodeModal\">\n                <i class=\"bi bi-qr-code\"></i><br><small>QR</small>\n              </button>\n            </div>\n          </div>\n        </div>   \n      </nav>\n      <div class=\"fixed-top d-flex w-100 h-100 align-items-center justify-content-center bg-black\" style=\"z-index: 1;\">\n        <video class=\"video\" :class=\"[(isMirror) ? 'mirror' : '']\" ref=\"videoEl\"></video>\n      </div>\n      <div v-if=\"!isWebView && isMobile && !isLandscape\" class=\"fixed-bottom w-100 text-center text-white d-flex justify-content-center align-items-center p-3\">\n        <i class=\"bi bi-phone-landscape h1\"></i>\n        <div class=\"ps-3\">\n          가로모드로 전환 후<br>새로고침을 해주세요\n        </div>\n      </div>\n    </div>\n    <div class=\"fixed-top w-100 h-100 bg-black d-flex justify-content-center align-items-center\" v-else>\n      <div>\n        <div>\n          <i class=\"bi bi-battery-half text-white\"></i>\n        </div>\n        <button class=\"btn text-white\" @click=\"onClickSaveMode(!isSaveMode)\">        \n          <div class=\"h4\">\n            <i class=\"bi bi-unlock-fill\"></i> UNLOCK\n          </div>\n        </button>\n      </div>\n    </div>\n    \n    <div class=\"modal fade\" id=\"qrcodeModal\" tabindex=\"-1\" aria-labelledby=\"qrcodeModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal-dialog-centered\">\n        <div class=\"modal-content\">        \n          <div class=\"modal-body\">\n            <div class=\"row\">\n              <div class=\"col\">\n                ID: {{ myPeerId }}\n              </div>\n              <div class=\"col-2 ms-auto text-end\">\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n              </div>\n            </div>\n            <div v-if=\"qrImgSrc\">\n              <img class=\"w-100\" :src=\"qrImgSrc\"/>\n            </div>\n          </div>\n          <div class=\"modal-footer justify-content-center border-0\">          \n            <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" aria-label=\"Close\">Close</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref, inject, computed, onUnmounted, nextTick } from \"vue\";\nimport { useStore } from \"vuex\";\nimport QRCode from 'qrcode';\nimport NoSleep from 'nosleep.js';\nconst noSleep = new NoSleep()\nconst store = useStore()\nconst videoEl = ref(null)\nlet peer = null;\n\nconst mediaDevices = ref({})\nconst qrImgSrc = ref(null)\n\nconst isMirror = ref(false)\nconst connectedPeers = ref({})\n\nconst isFullScreen = ref(false)\n\nconst videoStream = ref(null)\nconst orientationType = ref('')\n\nconst myPeerId = computed(()=>{\n  return store.getters.getPeerId\n})\n\nconst isSaveMode = ref(false)\n\nconst isAndroid = computed(()=> /Android/i.test(window.navigator.userAgent))\nconst isIOS = computed(()=> /iPhone|iPad|iPod/i.test(window.navigator.userAgent))\n\nconst isMobile = computed(()=> /iPhone|iPad|iPod|Android/i.test(window.navigator.userAgent))\n\nconst isWebView = computed(()=> /wv/i.test(window.navigator.userAgent))\n\nconst isLandscape = computed(()=>{\n  return orientationType.value.indexOf('landscape') > -1\n})\n\nconst onClickRefresh = ()=> location.reload(true)\n\nconst getMediaConstraints = ()=>{\n  const screenWidth = window.screen.width\n  const screenHeight = window.screen.height\n  const scale = window.devicePixelRatio ?? 1\n  let videoWidth = Math.floor(screenWidth * scale)\n  let videoHeight = Math.floor(screenHeight * scale) \n  let constraints = { video: {width: {exact: videoWidth}, height: {exact: videoHeight} }, audio: false }    \n  if(isMobile.value){\n    constraints.video.aspectRatio = screenWidth / screenHeight\n    constraints.video.facingMode = { exact: \"environment\" }\n  }\n  console.log(JSON.stringify(constraints))\n  return constraints\n}\n\nconst loadMyVideo = async()=>{\n    const constraint = getMediaConstraints()\n    try{\n        const getUserMedia = navigator.mediaDevices.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n        const stream = await getUserMedia(constraint)\n        return stream\n    }catch(e) {\n        console.error(e)\n    }\n}\n\nconst onClickSaveMode = (isSave)=> {  \n  if(isSave) {\n    videoEl.value.srcObject = null\n    isSaveMode.value = isSave\n  }else{\n    isSaveMode.value = isSave\n    nextTick(()=>{\n      videoEl.value.srcObject = videoStream.value\n      videoEl.value.play()\n    })\n  }\n  \n}\n\nconst toggleFullScreen = ()=>{\n  const element = document.querySelector('#screen')\n  if (!document.fullscreenElement) {    \n    if(element.webkitRequestFullscreen){\n      element.webkitRequestFullscreen()\n    }else if(element.mozRequestFullScreen){\n      element.mozRequestFullScreen()\n    }else if(element.msRequestFullscreen){\n      element.msRequestFullscreen()\n    }else{\n      element.requestFullscreen()\n    }          \n    isFullScreen.value = true\n  } else {  \n    if (document.webkitCancelFullscreen){\n      document.webkitCancelFullscreen()\n    }else if(document.mozCancelFullScreen){\n      document.mozCancelFullScreen()\n    }else if(document.msExitFullscreen){\n      document.msExitFullscreen()\n    }else{\n      document.exitFullscreen()\n    }    \n    isFullScreen.value = false\n  }\n}\n\nconst loadCameras = async()=>{\n  const devices = await navigator.mediaDevices.enumerateDevices()  \n  const cameraDevices = devices.filter((item)=> item.kind == 'videoinput')\n  cameras.value = cameraDevices\n}\n\nconst orientationChangeListner = (event)=>{\n  orientationType.value = event.target.screen.orientation.type\n  if(videoStream.value){\n    const videoTrack = videoStream.value.getVideoTracks()[0]\n    const constraints = getMediaConstraints()\n    videoTrack.applyConstraints(constraints)\n    .then(()=>{})\n    .catch((e)=>{\n      console.error(e)\n    })\n  }\n}\n\nonMounted(async ()=>{\n  noSleep.enable()\n  window.addEventListener('orientationchange', orientationChangeListner)\n  orientationType.value = window.screen.orientation.type\n  const stream = await loadMyVideo()     \n  videoStream.value = stream\n  videoEl.value.srcObject = stream  \n  videoEl.value.play()  \n  qrImgSrc.value = await QRCode.toDataURL(myPeerId.value)\n  const peer = new Peer(myPeerId.value)\n\n  peer.on(\"open\", (id) => {              \n    \n  })\n\n  peer.on('connection', (conn)=>{        \n    conn.on('close', ()=>{\n      delete connectedPeers.value[conn.peer]\n    })\n  })\n\n  peer.on(\"call\", (call)=>{\n    call.answer(stream);    \n    connectedPeers.value[call.peer] = call\n    call.on('close', (event)=>{\n      console.log('close')\n    })    \n  })\n})\n\nonUnmounted(()=>{\n  noSleep.disable()\n  window.removeEventListener('orientationchange', orientationChangeListner)\n})\n\n</script>\n\n\n<style lang=\"scss\" scoped>\n.video{  \n  width: 100%;\n  &.mirror{\n    transform: rotateY(180deg);\n    -webkit-transform:rotateY(180deg); /* Safari and Chrome */\n    -moz-transform:rotateY(180deg); /* Firefox */\n  }\n}\n</style>","import script from \"./HomeView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomeView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HomeView.vue?vue&type=style&index=0&id=567688ce&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-567688ce\"]])\n\nexport default __exports__","<template>\n  <div class=\"fixed-top w-100 h-100 d-flex align-items-center justify-content-center\">\n    <div class=\"text-center\">\n      <div class=\"spinner-border text-primary mb-3\" role=\"status\">\n        <span class=\"visually-hidden\"></span>\n      </div>\n      <div class=\"h4 text-primary\">Initializing...</div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted } from \"vue\";\nimport { v4 as uuidv4 } from 'uuid';\nimport { useStore } from \"vuex\";\nimport { useRoute, useRouter } from \"vue-router\";\n\nconst store = useStore()\nconst router = useRouter()\nconst route = useRoute()\n\nonMounted(()=>{\n  let myPeerId = localStorage.getItem('myid')\n  if(myPeerId == null){\n    myPeerId = route.query.uuid\n    myPeerId = (myPeerId == null) ? uuidv4() : myPeerId\n    localStorage.setItem('myid', myPeerId)\n  }  \n  store.commit('setPeerId', myPeerId)\n  router.replace('/')\n})\n</script>\n","import script from \"./InitializeView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./InitializeView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createStore } from 'vuex'\n\nexport default createStore({\n  state: {\n    peerId: null\n  },\n  getters: {\n    getPeerId(state) {\n      return state.peerId\n    }\n  },\n  mutations: {\n    setPeerId(state, id) {\n      state.peerId = id\n    }\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n","import { createRouter, createWebHistory } from 'vue-router'\nimport HomeView from '../views/HomeView.vue'\nimport InitView from '../views/InitializeView.vue'\nimport store from '../store'\nconst routes = [\n  {\n    path: '/',\n    name: 'home',\n    component: HomeView,\n    beforeEnter: (to, from, next) => {\n      const peerId = store.getters['getPeerId']\n      if(peerId){\n        next()\n      }else{\n        const query = to.query\n        next({path: '/initialize', query: query})\n      }      \n    }\n  },\n  {\n    path: '/initialize',\n    name: 'initialize',\n    component: InitView\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n})\n\nexport default router\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport './registerServiceWorker'\nimport router from './router'\nimport store from './store'\n\ncreateApp(App).use(store).use(router).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkWebRTC_Camera\"] = self[\"webpackChunkWebRTC_Camera\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(5938); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_router_view","script","__exports__","render","isWebView","test","window","navigator","userAgent","register","ready","console","log","registered","cached","updatefound","updated","offline","error","noSleep","NoSleep","store","useStore","videoEl","ref","qrImgSrc","isMirror","connectedPeers","isFullScreen","videoStream","orientationType","myPeerId","computed","getters","getPeerId","isSaveMode","isMobile","isLandscape","value","indexOf","onClickRefresh","location","reload","getMediaConstraints","screenWidth","screen","width","screenHeight","height","scale","devicePixelRatio","videoWidth","Math","floor","videoHeight","constraints","video","exact","audio","aspectRatio","facingMode","JSON","stringify","loadMyVideo","async","constraint","getUserMedia","mediaDevices","webkitGetUserMedia","mozGetUserMedia","stream","e","onClickSaveMode","isSave","srcObject","nextTick","play","toggleFullScreen","element","document","querySelector","fullscreenElement","webkitCancelFullscreen","mozCancelFullScreen","msExitFullscreen","exitFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","requestFullscreen","orientationChangeListner","event","target","orientation","type","videoTrack","getVideoTracks","applyConstraints","then","catch","onMounted","enable","addEventListener","QRCode","peer","Peer","on","id","conn","call","answer","onUnmounted","disable","removeEventListener","router","useRouter","route","useRoute","localStorage","getItem","query","uuid","uuidv4","setItem","commit","replace","createStore","state","peerId","mutations","setPeerId","actions","modules","routes","path","name","component","HomeView","beforeEnter","to","from","next","InitView","createRouter","history","createWebHistory","process","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","Object","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","push","__webpack_exports__"],"sourceRoot":""}