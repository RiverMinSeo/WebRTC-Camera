(function(){"use strict";var e={5044:function(e,t,n){var l=n(5130),a=n(6768);function i(e,t){const n=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.Wv)(n)}var o=n(1241);const s={},r=(0,o.A)(s,[["render",i]]);var c=r,u=n(4458);const d=()=>/wv/i.test(window.navigator.userAgent);d()||(0,u.k)("/WebRTC-Camera/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var v=n(1387),b=n(4232),h=n(144),g=n(782),k=n(8420),f=n(8152),w=n.n(f);const p=e=>((0,a.Qi)("data-v-a774e98c"),e=e(),(0,a.jt)(),e),m={id:"screen"},y={key:0},L={class:"navbar fixed-top d-block",style:{"z-index":"999","background-color":"rgba(0, 0, 0, 0.5)"}},x={class:"row"},C={class:"col-6"},E={class:"d-flex"},R={type:"button",class:"btn text-white"},j=p((()=>(0,a.Lk)("i",{class:"bi bi-eye-fill"},null,-1))),F={key:0,class:"dropdown"},_={class:"btn dropdown-toggle text-white",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},O={class:"dropdown-menu"},q=["onClick"],P={key:0,class:"bi bi-check"},W={key:1,class:"ms-3"},X={class:"col-6 text-end"},I={class:"d-flex justify-content-between pe-3"},K=p((()=>(0,a.Lk)("i",{class:"bi bi-arrow-clockwise"},null,-1))),A=[K],z={key:0},S=p((()=>(0,a.Lk)("i",{class:"bi bi-fullscreen-exit"},null,-1))),M=[S],Q={key:1},T=p((()=>(0,a.Lk)("i",{class:"bi bi-fullscreen"},null,-1))),D=[T],V=p((()=>(0,a.Lk)("i",{class:"bi bi-battery-half"},null,-1))),N=p((()=>(0,a.Lk)("br",null,null,-1))),U=p((()=>(0,a.Lk)("small",null,"절전",-1))),B=[V,N,U],H=p((()=>(0,a.Lk)("button",{type:"button",class:"btn text-white","data-bs-toggle":"modal","data-bs-target":"#qrcodeModal"},[(0,a.Lk)("i",{class:"bi bi-qr-code"}),(0,a.Lk)("br"),(0,a.Lk)("small",null,"QR")],-1))),G={class:"fixed-top d-flex w-100 h-100 align-items-center justify-content-center bg-black",style:{"z-index":"1"}},J={key:0,class:"fixed-bottom w-100 text-center text-white d-flex justify-content-center align-items-center p-3"},Y=p((()=>(0,a.Lk)("i",{class:"bi bi-phone-landscape h1"},null,-1))),$=p((()=>(0,a.Lk)("div",{class:"ps-3"},[(0,a.eW)(" 가로모드로 전환 후"),(0,a.Lk)("br"),(0,a.eW)("새로고침을 해주세요 ")],-1))),Z=[Y,$],ee={key:1,class:"fixed-top w-100 h-100 bg-black d-flex justify-content-center align-items-center"},te={key:0,class:"text-white h1 text-center mb-3"},ne=p((()=>(0,a.Lk)("span",{class:"h3"},"%",-1))),le=p((()=>(0,a.Lk)("div",{class:"h4"},[(0,a.Lk)("i",{class:"bi bi-unlock-fill"}),(0,a.eW)(" UNLOCK ")],-1))),ae=[le],ie={class:"modal fade",id:"qrcodeModal",tabindex:"-1","aria-labelledby":"qrcodeModalLabel","aria-hidden":"true"},oe={class:"modal-dialog modal-dialog-centered"},se={class:"modal-content"},re={class:"modal-body"},ce={class:"row"},ue={class:"col"},de=p((()=>(0,a.Lk)("div",{class:"col-2 ms-auto text-end"},[(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ve={key:0,class:"text-center"},be=["src"],he=p((()=>(0,a.Lk)("div",{class:"modal-footer justify-content-center border-0"},[(0,a.Lk)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal","aria-label":"Close"},"Close")],-1)));var ge={__name:"HomeView",setup(e){const t=new(w()),n=(0,g.Pj)(),l=(0,h.KR)(null);(0,h.KR)({});const i=(0,h.KR)(null),o=(0,h.KR)(!1),s=(0,h.KR)({}),r=(0,h.KR)(!1),c=(0,h.KR)(null),u=(0,h.KR)(""),d=(0,h.KR)(null);let v=null;const f=(0,a.EW)((()=>n.getters.getPeerId)),p=(0,h.KR)(!1),K=((0,a.EW)((()=>/Android/i.test(window.navigator.userAgent))),(0,a.EW)((()=>/iPhone|iPad|iPod/i.test(window.navigator.userAgent))),(0,a.EW)((()=>/iPhone|iPad|iPod|Android/i.test(window.navigator.userAgent)))),S=(0,a.EW)((()=>/wv/i.test(window.navigator.userAgent))),T=(0,a.EW)((()=>u.value.indexOf("landscape")>-1)),V={SD:{width:720,height:480},HD:{width:1280,height:720},FHD:{width:1920,height:1080},QHD:{width:2560,height:1440}},N=(0,h.KR)({}),U=(0,h.KR)("SD"),Y=(0,h.KR)(!1),$=()=>{Y.value?(t.disable(),Y.value=!1):(t.enable(),Y.value=!0)},le=()=>location.reload(!0),ge=e=>{U.value=e;const t=N.value[e],n=c.value.getVideoTracks()[0];n.applyConstraints({width:t.width,height:t.height}).then((()=>{console.log(c.value.getVideoTracks()[0].getSettings())})).catch((e=>{console.error(e)}))},ke=async()=>{navigator.getBattery&&(d.value=await navigator.getBattery(),v=setInterval((async()=>{d.value=await navigator.getBattery(),console.log(d.value)}),5e3))},fe=()=>{const e=window.screen.width,t=window.screen.height,n=window.devicePixelRatio??1;let l=Math.floor(e*n),a=Math.floor(t*n),i={};for(let o in V){const e=V[o];e.width<=l&&e.height<=a&&(i[o]=e)}N.value=i},we=e=>{let t=e.width,n=e.height,l={video:{width:{exact:t},height:{exact:n}},audio:!1};return K.value&&(l.video.facingMode={exact:"environment"}),console.log(JSON.stringify(l)),l},pe=async()=>{const e=N.value[U.value],t=we(e);try{const e=navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,n=await e(t);return n}catch(n){console.error(n)}},me=e=>{e?(l.value.srcObject=null,p.value=e):(p.value=e,(0,a.dY)((()=>{l.value.srcObject=c.value,l.value.play()})))},ye=()=>{const e=document.querySelector("#screen");document.fullscreenElement?(document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.exitFullscreen(),r.value=!1):(e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.requestFullscreen(),r.value=!0)},Le=e=>{if(u.value=e.target.screen.orientation.type,c.value){const e=c.value.getVideoTracks()[0],t=we();e.applyConstraints(t).then((()=>{})).catch((e=>{console.error(e)}))}};return(0,a.sV)((async()=>{window.addEventListener("orientationchange",Le),u.value=window.screen.orientation.type,ke(),fe();const e=await pe();c.value=e,l.value.srcObject=e,l.value.play(),i.value=await k.toDataURL(f.value,{width:200});const t=new Peer(f.value);t.on("open",(e=>{})),t.on("connection",(e=>{e.on("close",(()=>{delete s.value[e.peer]}))})),t.on("call",(t=>{t.answer(e),s.value[t.peer]=t,t.on("close",(e=>{console.log("close")}))}))})),(0,a.hi)((()=>{Y.value&&t.disable(),window.removeEventListener("orientationchange",Le)})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",m,[p.value?((0,a.uX)(),(0,a.CE)("div",ee,[(0,a.Lk)("div",null,[d.value?((0,a.uX)(),(0,a.CE)("div",te,[(0,a.Lk)("i",{class:(0,b.C4)(["bi d-inline-block",[d.value.charging?"bi-battery-charging":"bi-battery-half"]]),style:{transform:"rotate(270deg)"}},null,2),(0,a.eW)(" "+(0,b.v_)(Math.floor(100*d.value.level))+" ",1),ne])):(0,a.Q3)("",!0),(0,a.Lk)("button",{class:"btn text-white",onClick:t[4]||(t[4]=e=>me(!p.value))},ae)])])):((0,a.uX)(),(0,a.CE)("div",y,[(0,a.Lk)("nav",L,[(0,a.Lk)("div",x,[(0,a.Lk)("div",C,[(0,a.Lk)("div",E,[(0,a.Lk)("button",R,[j,(0,a.eW)("   "+(0,b.v_)(Object.values(s.value).length),1)]),N.value[U.value]?((0,a.uX)(),(0,a.CE)("div",F,[(0,a.Lk)("button",_," 해상도: "+(0,b.v_)(N.value[U.value].width)+" x "+(0,b.v_)(N.value[U.value].height),1),(0,a.Lk)("ul",O,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(N.value,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t},[(0,a.Lk)("a",{class:(0,b.C4)(["dropdown-item",[U.value!=t?"text-secondary":""]]),href:"javascript:;",onClick:e=>ge(t)},[U.value==t?((0,a.uX)(),(0,a.CE)("i",P)):((0,a.uX)(),(0,a.CE)("span",W)),(0,a.eW)(" "+(0,b.v_)(t)+" ( "+(0,b.v_)(e.width)+" x "+(0,b.v_)(e.height)+" ) ",1)],10,q)])))),128))])])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",X,[(0,a.Lk)("div",I,[S.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",class:"btn text-white",onClick:t[0]||(t[0]=e=>$())},[(0,a.Lk)("i",{class:(0,b.C4)(["bi",[Y.value?"bi-display-fill":"bi-display"]])},null,2)])),(0,a.Lk)("button",{type:"button",class:"btn text-white",onClick:t[1]||(t[1]=e=>le())},A),S.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:1,type:"button",class:"btn text-white",onClick:t[2]||(t[2]=e=>ye())},[r.value?((0,a.uX)(),(0,a.CE)("span",z,M)):((0,a.uX)(),(0,a.CE)("span",Q,D))])),(0,a.Lk)("button",{type:"button",class:"btn text-white",onClick:t[3]||(t[3]=e=>me(!p.value))},B),H])])])]),(0,a.Lk)("div",G,[(0,a.Lk)("video",{class:(0,b.C4)(["video",[o.value?"mirror":""]]),ref_key:"videoEl",ref:l},null,2)]),S.value||!K.value||T.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",J,Z))])),(0,a.Lk)("div",ie,[(0,a.Lk)("div",oe,[(0,a.Lk)("div",se,[(0,a.Lk)("div",re,[(0,a.Lk)("div",ce,[(0,a.Lk)("div",ue," ID: "+(0,b.v_)(f.value),1),de]),i.value?((0,a.uX)(),(0,a.CE)("div",ve,[(0,a.Lk)("img",{src:i.value},null,8,be)])):(0,a.Q3)("",!0)]),he])])])]))}};const ke=(0,o.A)(ge,[["__scopeId","data-v-a774e98c"]]);var fe=ke,we=n(3574);const pe={class:"fixed-top w-100 h-100 d-flex align-items-center justify-content-center"},me=(0,a.Lk)("div",{class:"text-center"},[(0,a.Lk)("div",{class:"spinner-border text-primary mb-3",role:"status"},[(0,a.Lk)("span",{class:"visually-hidden"})]),(0,a.Lk)("div",{class:"h4 text-primary"},"Initializing...")],-1),ye=[me];var Le={__name:"InitializeView",setup(e){const t=(0,g.Pj)(),n=(0,v.rd)(),l=(0,v.lq)();return(0,a.sV)((()=>{let e=localStorage.getItem("myid");null==e&&(e=l.query.uuid,e=null==e?(0,we.A)():e,localStorage.setItem("myid",e)),t.commit("setPeerId",e),n.replace("/")})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",pe,ye))}};const xe=Le;var Ce=xe,Ee=(0,g.y$)({state:{peerId:null},getters:{getPeerId(e){return e.peerId}},mutations:{setPeerId(e,t){e.peerId=t}},actions:{},modules:{}});const Re=[{path:"/",name:"home",component:fe,beforeEnter:(e,t,n)=>{const l=Ee.getters["getPeerId"];if(l)n();else{const t=e.query;n({path:"/initialize",query:t})}}},{path:"/initialize",name:"initialize",component:Ce}],je=(0,v.aE)({history:(0,v.LA)("/WebRTC-Camera/"),routes:Re});var Fe=je;(0,l.Ef)(c).use(Ee).use(Fe).mount("#app")}},t={};function n(l){var a=t[l];if(void 0!==a)return a.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,l,a,i){if(!l){var o=1/0;for(u=0;u<e.length;u++){l=e[u][0],a=e[u][1],i=e[u][2];for(var s=!0,r=0;r<l.length;r++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](l[r])}))?l.splice(r--,1):(s=!1,i<o&&(o=i));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[l,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,i,o=l[0],s=l[1],r=l[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(r)var u=r(n)}for(t&&t(l);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},l=self["webpackChunkWebRTC_Camera"]=self["webpackChunkWebRTC_Camera"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=n.O(void 0,[504],(function(){return n(5044)}));l=n.O(l)})();
//# sourceMappingURL=app.5cd75e0e8f0a0695.js.map